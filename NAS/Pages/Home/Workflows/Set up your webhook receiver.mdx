---
title: Set up your webhook receiver
account: NAS
---

To start receiving webhook notifications, you can use our Workflows API to create a workflow by specifying both the events you would like to subscribe to and the necessary configurations for the webhook workflow action.

The webhook workflow action supports the following features:

*   [Webhook signatures](#Setupyourwebhookreceiver-signatures)
    
*   [Custom headers](#Setupyourwebhookreceiver-customheaders)
    
*   [Automatic retries](#Setupyourwebhookreceiver-retries)
    

### Webhook signatures

A webhook signature is a security measure which allows you to verify the integrity and authenticity of the data you’re receiving. Each webhook contains a hash-based message authentication code (HMAC) in its Cko-Signature header. We generate the HMAC by taking the contents of the webhook notification and hashing it using the key provided in the webhook action of your workflow.

What is an HMAC?

A hash-based message authentication code (HMAC) is a type of message authentication code involving a cryptographic hash function and a secret cryptographic key. If any change is made to the data being sent, the resulting HMAC will be completely different from the original. Additionally, since the key is known only to the sender and the receiver, no valid HMAC can be regenerated by anyone else.

Using signatures is simple. All you need to do is take the webhook's body and apply the SHA-256 hash function to it, using your key as the hash key. You then compare the resulting HMAC to the one contained in the `Cko-Signature` header. If the HMACs are identical, then the data corresponds to what we sent. If they are different, this indicates that the data has been intercepted and altered in some way.

### Custom headers 

You can configure custom headers which will be included in each webhook notification. You can use this feature to configure a key that you want to provide in the Authorization HTTP header of your webhook notifications, allowing you to authenticate the request with your server.

### Automatic retries 

When a webhook notification fails, the retry mechanism begins. We automatically try to resend the webhook notification multiple times, following this schedule: after 1 minute, after 2 minutes, after 5 minutes, and two more times with 15-minute intervals in between. After the final failure, we will cancel the webhook notification. If you need to replay the events, you can use the [Events API](/display/x/View+events).

### IP address whitelisting 

If a client is configured to receive webhook notifications, callbacks will be sent from specific IP addresses. These depend on whether you are working in sandbox or production (live). Clients can use this to whitelist requests that come from [Checkout.com](http://Checkout.com).

*   [**Sandbox**](#tabs-58dd36c5-5b7d-46a1-8ce7-344547ae02f8-1)
*   [**Production**](#tabs-58dd36c5-5b7d-46a1-8ce7-344547ae02f8-2)

*   34.250.245.3
    
*   52.16.123.4
    
*   52.211.205.187
    

*   54.246.243.142
    
*   52.209.35.130
    
*   34.246.107.175
    

Creating a workflow
-------------------

### The request

#### Endpoints

*   [**Live**](#tabs-ad3b089d-4f34-4124-94b5-6862ddc06d9f-1)
*   [**Sandbox**](#tabs-ad3b089d-4f34-4124-94b5-6862ddc06d9f-2)

POST`https://api.checkout.com/workflows`

POST`https://api.sandbox.checkout.com/workflows`

#### Header parameters

Header

Value

Header

Value

`Authorization`

REQUIRED

`OAuth Bearer access token`

Use the access token from access key authentication.

`Content-Type`

REQUIRED

`application/json`

#### Body parameters

Field name

Description

Field name

Description

`name`

OPTIONAL

STRING

  

A name you can use to describe your workflow.

`conditions`

OPTIONAL

ARRAY

  

The workflow conditions.

`conditions.type`

REQUIRED

STRING

  

The type of workflow condition. You must include an `event` condition. The `entity` condition is an optional filter, which only supports `gateway` and `dispute` webhooks.

`conditions.events`

REQUIRED

OBJECT

  

The events object.

`conditions.events.property_name`

REQUIRED

ARRAY

The event source. One or more of `gateway`, `marketplace`, or `dispute`.

`conditions.entities`

REQUIRED if you include an `entity` condition

ARRAY

The entities array.

`actions`

OPTIONAL

OBJECT

  

The workflow actions.

`actions.type`

REQUIRED

STRING

The type of workflow action.

`actions.url`

REQUIRED

STRING

  

Your webhook endpoint URL.

`actions.headers`

OPTIONAL

OBJECT

  

Optional [HTTP headers](https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers) added to the request.

`actions.headers.property_name`

OPTIONAL

STRING

  

The HTTP header value.

`actions.signature`

OPTIONAL

OBJECT

  

Used to produce a signature of the webhook contents that will be included in the `Cko-Signature` header. This value can be computed by you on receipt of a webhook to validate its authenticity.

`actions.signature.method`

OPTIONAL

ENUM

  

The signing method. Defaults to HMAC SHA256.

`actions.signature.key`

REQUIRED

STRING

  

The key used to sign the webhook.

#### Request example

    {
      "name": "My Webhook Workflow",
      "conditions": [
        {
          "type": "event",
          "events": {
            "gateway": [
              "payment_approved",
              "payment_declined",
              "card_verification_declined",
              "card_verified",
              "payment_authorization_incremented",
              "payment_authorization_increment_declined",
              "payment_capture_declined",
              "payment_captured",
              "payment_refund_declined",
              "payment_refunded",
              "payment_void_declined",
              "payment_voided"
            ],
            "dispute": [
              "dispute_canceled",
              "dispute_evidence_required",
              "dispute_expired",
              "dispute_lost",
              "dispute_resolved",
              "dispute_won"
            ]
          }
        },
        {
          "type": "entity",
          "entities": [
            "ent_xyfdshfudosfdshfdiosfds",
            "ent_fidjosfjdisofdjsifdosfu"
          ]
        }
      ],
      "actions": [
        {
          "type": "webhook",
          "url": "https://example.com/webhook-receiver",
          "headers": {
            "Authorization": "secret-key"
          },
          "signature": {
            "key": "signature-key"
          }
        }
      ]

### The response

#### Response example

    {
      "id": "wf_wlu3wxc26jounofs5iez75qaqa",
      "_links": {
        "self": {
          "href": "https://api.checkout.com/workflows/wf_wlu3wxc26jounofs5iez75qaqa"
        }
      }
    }
